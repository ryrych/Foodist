!function(){"use strict";angular.module("macgular",["ngAnimate","ngCookies","ngTouch","ngSanitize","restangular","ui.router","ui.bootstrap","angular-storage","ui.tree","home","food"])}(),function(){"use strict";var o=angular.module("macgular");o.directive("macMenu",function(){return{restrict:"E",templateUrl:"app/shared/navbar/partials/navbar.html"}})}(),function(){"use strict";var o=angular.module("home",["home.controller"]);o.config(["$stateProvider","$urlRouterProvider",function(o,t){o.state("home",{url:"/",templateUrl:"app/components/home/partials/home.html",controller:"HomeCtrl",controllerAs:"HomeCtrl"}),t.otherwise("/")}])}(),function(){"use strict";var o=angular.module("home.controller",[]);o.controller("HomeCtrl",function(){})}(),function(){"use strict";var o=angular.module("food.service",[]);o.factory("FoodStore",["$http","$q","store",function(o,t,a){var e=[];return e.myFood=a.get("myFood")?a.get("myFood"):[],e.allFood=a.get("allFood")?a.get("allFood"):[],e["import"]=function(){return o.get("assets/models/food.json").then(function(o){return o.data})},e.storeAllFood=function(){a.set("allFood",angular.copy(e.allFood))},e.storeMyFood=function(){a.set("myFood",angular.copy(e.myFood))},e.addToMyFood=function(o){o.price=0,o.calories=0,o.protein=0,o.fat=0,o.carbohydrates=0,angular.forEach(o.foods,function(t){o.price+=t.price*t.count,o.calories+=t.calories*t.count,o.protein+=t.protein*t.count,o.fat+=t.fat*t.count,o.carbohydrates+=t.carbohydrates*t.count}),e.myFood.push(o),e.storeMyFood(),swal("Good job!","You added the item!","success")},e.addToAllFood=function(o){e.allFood.push(angular.copy(o)),e.storeAllFood(),swal("Good job!","You added the item!","success")},e.removeFromMyFood=function(o){e.myFood.splice(o,1),e.storeMyFood(),swal("Good job!","You removed the item!","success")},e.removeFromAllFood=function(o){e.allFood.splice(o,1),e.storeAllFood(),swal("Good job!","You removed the item!","success")},e}])}(),function(){"use strict";var o=angular.module("food",["food.controller","food.service","food.directive"]);o.config(["$stateProvider",function(o){o.state("manageFood",{url:"/managefood",templateUrl:"app/components/food/partials/manageFood.html",controller:"ManageFoodCtrl",controllerAs:"ManageFoodCtrl"}).state("meals",{url:"/meals",templateUrl:"app/components/food/partials/meals.html",controller:"MealsCtrl",controllerAs:"MealsCtrl"})}])}(),function(){"use strict";var o=angular.module("food.directive",[]);o.directive("manageFood",function(){return{restrict:"E",controller:["FoodStore",function(o){var t=this;t.addToAllFood=function(t){o.addToAllFood(t)},t.removeFromAllFood=function(t){o.removeFromAllFood(t)}}],controllerAs:"ManageFoodDir",scope:{items:"="},templateUrl:"app/components/food/partials/directive/manageFood.html"}}),o.directive("meals",function(){return{restrict:"E",controller:["FoodStore",function(o){var t=this;$("#addNewMeal").on("show.bs.modal",function(){t.initNewMeal()}),t.initNewMeal=function(){t.newMeal={},t.newMeal.foods=[]},t.foods=o.allFood,t.removeFromMyMeal=function(t){o.removeFromMyFood(t)},t.addFoodToMeal=function(o){var a=!1;angular.forEach(t.newMeal.foods,function(t){t.name===o.name&&(t.count+=o.count,a=!0)}),a||t.newMeal.foods.push(angular.copy(o)),swal("Good job!","You added the item!","success")},t.addMeal=function(t){t.date=(new Date).getTime(),o.addToMyFood(t),$("#addNewMeal").modal("hide")},t.selectMeal=function(o){o.selected=o.selected?!1:!0}}],controllerAs:"MealsDir",scope:{items:"="},templateUrl:"app/components/food/partials/directive/meals.html"}})}(),function(){"use strict";var o=angular.module("food.controller",[]);o.controller("ManageFoodCtrl",["FoodStore",function(o){var t=this;t.allFood=o.allFood,t.importFood=function(){o["import"]().then(function(a){o.allFood=a,t.allFood=a,o.storeAllFood()})}}]),o.controller("MealsCtrl",["FoodStore",function(o){var t=this;t.meals=o.myFood}])}(),function(){"use strict";var o=angular.module("macgular");o.run(function(){})}(),function(){"use strict";angular.module("macgular")}(),function(){"use strict";var o=angular.module("macgular");o.config(["$logProvider",function(o){o.debugEnabled(!0)}])}(),angular.module("macgular").run(["$templateCache",function(o){o.put("app/components/home/partials/home.html",'<div class="container"><div class="jumbotron"><h1>Foodist</h1><hr><mac-menu></mac-menu></div></div>'),o.put("app/components/food/partials/manageFood.html",'<div class="container"><div class="jumbotron"><h1>Manage your food</h1><hr><mac-menu></mac-menu></div><manage-food items="ManageFoodCtrl.allFood"></manage-food></div>'),o.put("app/components/food/partials/meals.html",'<div class="container"><div class="jumbotron"><h1>Your meals</h1><hr><mac-menu></mac-menu></div><meals items="MealsCtrl.meals"></meals></div>'),o.put("app/shared/navbar/partials/navbar.html",'<ul class="list-unstyled list-inline"><li><a class="btn btn-success" ui-sref-active="disabled" ui-sref="home">Home</a></li><li><a class="btn btn-success" ui-sref-active="disabled" ui-sref="manageFood">Manage Food</a></li><li><a class="btn btn-success" ui-sref-active="disabled" ui-sref="meals">My meals</a></li></ul>'),o.put("app/components/food/partials/directive/manageFood.html",'<button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target="#addItemModal"><span class="fa fa-plus">Add new item</span></button><table class="table table-responsive table-striped"><thead><th></th><th>name</th><th>price</th><th>calories</th><th>protein</th><th>fat</th><th>carbohydrates</th></thead><tbody><tr ng-repeat="item in items"><td><button class="btn btn-danger" ng-click="ManageFoodDir.removeFromAllFood(item)" type="button"><span class="fa fa-close"></span></button></td><td ng-bind="item.name"></td><td ng-bind="item.price"></td><td ng-bind="item.calories"></td><td ng-bind="item.protein"></td><td ng-bind="item.fat"></td><td ng-bind="item.carbohydrates"></td></tr></tbody></table><div class="modal fade" id="addItemModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">Add new item</h4></div><form class="form-horizontal" ng-submit="ManageFoodDir.addToAllFood(newItem)"><div class="modal-body"><fieldset><div class="form-group"><label class="col-md-4 control-label">Name</label><div class="col-md-4"><input type="text" required="" ng-model="newItem.name" class="form-control input-md"></div></div><div class="form-group"><label class="col-md-4 control-label">Price</label><div class="col-md-4"><input type="number" required="" ng-model="newItem.price" class="form-control input-md"></div></div><div class="form-group"><label class="col-md-4 control-label">Calories</label><div class="col-md-4"><input type="number" required="" ng-model="newItem.calories" class="form-control input-md"></div></div><div class="form-group"><label class="col-md-4 control-label">Protein</label><div class="col-md-4"><input type="number" required="" ng-model="newItem.protein" class="form-control input-md"></div></div><div class="form-group"><label class="col-md-4 control-label">Fat</label><div class="col-md-4"><input type="number" required="" ng-model="newItem.fat" class="form-control input-md"></div></div><div class="form-group"><label class="col-md-4 control-label">Carbohydrates</label><div class="col-md-4"><input type="number" required="" ng-model="newItem.carbohydrates" class="form-control input-md"></div></div></fieldset></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button> <button type="submit" class="btn btn-primary">Add Item</button></div></form></div></div></div>'),o.put("app/components/food/partials/directive/meals.html",'<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addNewMeal"><span class="fa fa-plus">Add new meal</span></button><table class="table table-responsive table-striped"><thead><th>date</th><th>name</th><th>price</th><th>calories</th><th>protein</th><th>fat</th><th>carbohydrates</th></thead><tbody ng-repeat="meal in items"><tr ng-click="meal.selected ? meal.selected = false : meal.selected = true;"><td ng-bind="meal.date | date : \'dd MMM yyyy HH:MM\'"></td><td ng-bind="meal.name"></td><td ng-bind="meal.price"></td><td ng-bind="meal.calories"></td><td ng-bind="meal.protein"></td><td ng-bind="meal.fat"></td><td ng-bind="meal.carbohydrates"></td></tr><tr ng-repeat="mea in meal.foods" ng-show="meal.selected"><td></td><td ng-bind="mea.name" class="success"></td><td ng-bind="mea.price" class="success"></td><td ng-bind="mea.calories" class="success"></td><td ng-bind="mea.protein" class="success"></td><td ng-bind="mea.fat" class="success"></td><td ng-bind="mea.carbohydrates" class="success"></td></tr></tbody></table><div class="modal fade" id="addNewMeal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">Add new item</h4></div><form class="form-horizontal" ng-submit="MealsDir.addMeal(MealsDir.newMeal)"><div class="modal-body"><fieldset><div class="form-group"><label class="col-md-4 control-label">Name</label><div class="col-md-4"><input type="text" required="" ng-model="MealsDir.newMeal.name" class="form-control input-md"></div></div><button type="button" class="btn btn-primary" data-toggle="modal" data-target="#addFood"><span class="fa fa-plus">Add food</span></button></fieldset></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button> <button type="submit" class="btn btn-primary">Add Meal</button></div></form></div></div></div><div class="modal fade" id="addFood" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" id="myModalLabel">List of food</h4></div><div class="modal-body"><ul class="list-group"><a ng-repeat="food in MealsDir.foods" class="list-group-item" ng-init="food.count = 1;"><button type="button" ng-click="MealsDir.addFoodToMeal(food)" ng-disabled="food.count < 1 || food.count == null" class="btn-success btn"><span class="fa fa-plus"></span></button> <input type="text" required="" ng-value="true" min="1" size="4" ng-model="food.count" name="name" value=""> <span class="pull-right h5">{{food.name}}</span></a></ul></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div></div></div>')}]);